# Enable Rewrite Engine
RewriteEngine On

# Set base directory
RewriteBase /skillvault/

# Remove .php extension
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*)$ $1.php [L]

# Redirect .php URLs to extensionless
RewriteCond %{THE_REQUEST} ^GET\ /skillvault/(.*)\.php
RewriteRule ^(.*)\.php$ /skillvault/$1 [R=301,L]

# Handle directories
DirectoryIndex index.php index.html

# Prevent directory listing
Options -Indexes

# Custom error pages
ErrorDocument 404 /skillvault/404.php
ErrorDocument 403 /skillvault/403.php
ErrorDocument 500 /skillvault/500.php

# Security - Prevent access to sensitive files
<FilesMatch "^\.">
    Order allow,deny
    Deny from all
</FilesMatch>

# Protect config files
<FilesMatch "(config|database)\.php$">
    Order allow,deny
    Deny from all
</FilesMatch>

# Allow access to assets
<FilesMatch "\.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$">
    Order allow,deny
    Allow from all
</FilesMatch>
